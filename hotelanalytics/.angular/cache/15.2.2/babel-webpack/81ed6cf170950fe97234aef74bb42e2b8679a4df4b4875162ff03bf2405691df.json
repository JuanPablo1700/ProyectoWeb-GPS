{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/52311/Documents/GPS/ProyectoWeb-GPS/hotelanalytics/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/error.service\";\nimport * as i5 from \"@angular/forms\";\nexport class LoginComponent {\n  constructor(_userService, toastr, router, _errorService) {\n    this._userService = _userService;\n    this.toastr = toastr;\n    this.router = router;\n    this._errorService = _errorService;\n    this.user = '';\n    this.password = '';\n  }\n  ngOnInit() {}\n  login() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (_this.user == '' || _this.password == '') {\n        _this.toastr.error('Todos los campos son obligatorios', 'Error');\n        return;\n      }\n      const user = {\n        user: _this.user,\n        password: _this.password\n      };\n      yield _this._userService.login(user).subscribe({\n        next: data => {\n          const token = data.token;\n          const activo = data.activo;\n          const tipo_usuario = data.tipo_usuario;\n          const pass_actualizada = data.pass_actualizada;\n          if (activo === \"1\") {\n            localStorage.setItem('token', token);\n            localStorage.setItem('user', user.user);\n            localStorage.setItem('tipo_usuario', tipo_usuario);\n            if (pass_actualizada == \"0\") {\n              _this.router.navigate(['/inicio']);\n            } else {\n              if (tipo_usuario === \"admin\") {\n                _this.router.navigate(['/principaldirector']);\n              } else if (tipo_usuario === \"gerente\") {\n                _this.router.navigate(['/principalgerente']);\n              } else if (tipo_usuario === \"recepcionista\") {\n                _this.router.navigate(['/principalrecepcionista']);\n              }\n            }\n          } else {\n            _this.toastr.error(\"Usuario desactivado\", \"Error\");\n            _this.router.navigate(['/login']);\n          }\n        },\n        error: e => {\n          _this._errorService.msjError(e);\n        },\n        complete: () => console.log('complete')\n      });\n    })();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ErrorService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 22,\n  vars: 2,\n  consts: [[1, \"bg-verde\", \"w-full\", \"h-24\"], [\"src\", \"../../../assets/img/logo.png \", 1, \"h-28\", \"-mt-4\"], [1, \"flex\", \"justify-center\", \"items-center\", \"h-5/6\"], [1, \"block\", \"lg:flex\", \"lg:justify-between\", \"w-3/4\"], [1, \"flex\", \"flex-col\", \"justify-center\", \"items-center\"], [1, \"text-titulo\", \"text-2xl\", \"font-bold\", \"text-center\", \"lg:mb-20\"], [\"src\", \"../../../assets/img/viaje.jpg \", 1, \"lg:h-96\", \"lg:w-auto\", \"h-20\", \"w-20\", \"hidden\", \"lg:flex\"], [1, \"flex\", \"justify-center\"], [1, \"p-20\", \"bg-white\", \"w-500\", \"h-700\", \"rounded-lg\"], [1, \"text-2xl\", \"font-semibold\"], [1, \"relative\", \"z-0\", \"my-10\"], [\"type\", \"text\", \"id\", \"usuario\", \"placeholder\", \" \", 1, \"block\", \"py-2.5\", \"p-0\", \"w-full\", \"text-sm\", \"text-gray-900\", \"bg-transparent\", \"border-0\", \"border-b-2\", \"border-gray-300\", \"appearance-none\", \"focus:outline-none\", \"focus:ring-0\", \"focus:border-verde\", \"peer\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"usuario\", 1, \"absolute\", \"text-sm\", \"text-gray-500\", \"duration-300\", \"transform\", \"-translate-y-8\", \"scale-75\", \"top-3\", \"-z-10\", \"origin-[0]\", \"peer-focus:left-0\", \"peer-focus:text-verde\", \"peer-focus:dark:text-verde\", \"peer-placeholder-shown:scale-100\", \"peer-placeholder-shown:translate-y-0\", \"peer-focus:scale-75\", \"peer-focus:-translate-y-8\"], [1, \"relative\", \"z-0\", \"my-5\"], [\"type\", \"password\", \"id\", \"contrasena\", \"placeholder\", \" \", 1, \"block\", \"py-2.5\", \"px-0\", \"w-full\", \"text-sm\", \"text-gray-900\", \"bg-transparent\", \"border-0\", \"border-b-2\", \"border-gray-300\", \"appearance-none\", \"focus:outline-none\", \"focus:ring-0\", \"focus:border-vertext-verde\", \"peer\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"contrasena\", 1, \"absolute\", \"text-sm\", \"text-gray-500\", \"duration-300\", \"transform\", \"-translate-y-8\", \"scale-75\", \"top-3\", \"-z-10\", \"origin-[0]\", \"peer-focus:left-0\", \"peer-focus:text-verde\", \"peer-focus:dark:text-verde\", \"peer-placeholder-shown:scale-100\", \"peer-placeholder-shown:translate-y-0\", \"peer-focus:scale-75\", \"peer-focus:-translate-y-8\"], [1, \"bg-verde\", \"text-white\", \"text-2xl\", \"px-20\", \"py-1\", \"mt-24\", 3, \"click\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"img\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h1\", 5);\n      i0.ɵɵtext(6, \"Bienvenido a HotelAnalytics\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"img\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 7)(9, \"div\", 8)(10, \"p\", 9);\n      i0.ɵɵtext(11, \"Iniciar Sesi\\u00F3n \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 10)(13, \"input\", 11);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_13_listener($event) {\n        return ctx.user = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"label\", 12);\n      i0.ɵɵtext(15, \" Nombre de Usuario\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"div\", 13)(17, \"input\", 14);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_17_listener($event) {\n        return ctx.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"label\", 15);\n      i0.ɵɵtext(19, \" Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"button\", 16);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_20_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtext(21, \" Ingresar \");\n      i0.ɵɵelementEnd()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(13);\n      i0.ɵɵproperty(\"ngModel\", ctx.user);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.password);\n    }\n  },\n  dependencies: [i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["LoginComponent","constructor","_userService","toastr","router","_errorService","ngOnInit","login","user","password","error","subscribe","next","data","token","activo","tipo_usuario","pass_actualizada","localStorage","setItem","navigate","e","msjError","complete","console","log","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\52311\\Documents\\GPS\\ProyectoWeb-GPS\\hotelanalytics\\src\\app\\components\\login\\login.component.ts","C:\\Users\\52311\\Documents\\GPS\\ProyectoWeb-GPS\\hotelanalytics\\src\\app\\components\\login\\login.component.html"],"sourcesContent":["import { HttpErrorResponse } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { User } from 'src/app/interfaces/user';\r\nimport { ErrorService } from 'src/app/services/error.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    templateUrl: './login.component.html',\r\n    styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent implements OnInit {\r\n    user: string = '';\r\n    password: string = '';\r\n\r\n    constructor(\r\n        private _userService: UserService,\r\n        private toastr: ToastrService,\r\n        private router: Router,\r\n        private _errorService: ErrorService\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n\r\n    }\r\n\r\n    async login() {\r\n        if (this.user == '' || this.password == '') {\r\n            this.toastr.error('Todos los campos son obligatorios', 'Error');\r\n            return\r\n        }\r\n\r\n        const user: User = {\r\n            user: this.user,\r\n            password: this.password\r\n        }\r\n\r\n        await this._userService.login(user).subscribe({\r\n            next: (data:any) => {\r\n                \r\n                const token = data.token;\r\n                const activo = data.activo;\r\n                const tipo_usuario = data.tipo_usuario;\r\n                const pass_actualizada = data.pass_actualizada;\r\n\r\n                if (activo === \"1\") {\r\n                    localStorage.setItem('token', token);\r\n                    localStorage.setItem('user', user.user);\r\n                    localStorage.setItem('tipo_usuario', tipo_usuario);\r\n                    if (pass_actualizada == \"0\") {\r\n                        this.router.navigate(['/inicio']);\r\n                    } else {\r\n                        if (tipo_usuario === \"admin\") {\r\n                            this.router.navigate(['/principaldirector']);\r\n                        } else if (tipo_usuario === \"gerente\") {\r\n                            this.router.navigate(['/principalgerente']);\r\n                        } else if (tipo_usuario === \"recepcionista\") {\r\n                            this.router.navigate(['/principalrecepcionista']);\r\n                        }\r\n                    }\r\n                } else {\r\n                    this.toastr.error(\"Usuario desactivado\", \"Error\");\r\n                    this.router.navigate(['/login']);\r\n                }\r\n            },\r\n            error: (e: HttpErrorResponse) => {\r\n                this._errorService.msjError(e);\r\n            },\r\n            complete: () => console.log('complete')\r\n        })\r\n    }\r\n}\r\n","<div class=\"bg-verde w-full h-24 \">\r\n    <img src=\"../../../assets/img/logo.png \" class=\"h-28 -mt-4\">\r\n</div>\r\n\r\n<div class=\"flex justify-center items-center h-5/6 \">\r\n    <div class=\"block lg:flex lg:justify-between w-3/4 \">\r\n        <div class=\"flex flex-col justify-center items-center\">\r\n            <h1 class=\"text-titulo text-2xl font-bold text-center lg:mb-20\">Bienvenido a HotelAnalytics</h1>\r\n            <img src=\"../../../assets/img/viaje.jpg \" class=\"lg:h-96 lg:w-auto h-20 w-20 hidden lg:flex\">\r\n        </div>\r\n        <div class=\"flex justify-center\">\r\n        <div class=\" p-20 bg-white w-500 h-700 rounded-lg \">\r\n            <p class=\"text-2xl font-semibold\">Iniciar Sesión </p>\r\n            <div class=\"relative z-0 my-10\">\r\n                <input type=\"text\" [(ngModel)]=\"user\" id=\"usuario\"\r\n                class=\"block py-2.5 p-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-verde peer\"\r\n                placeholder=\" \" />\r\n                <label for=\"usuario\"\r\n                class=\"absolute text-sm text-gray-500  duration-300 transform -translate-y-8 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-verde peer-focus:dark:text-verde peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-8\">\r\n                Nombre de Usuario</label>\r\n            </div>\r\n            <div class=\"relative z-0 my-5\">\r\n                <input type=\"password\" [(ngModel)]=\"password\" id=\"contrasena\"\r\n                class=\"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-vertext-verde peer\"\r\n                placeholder=\" \" />\r\n                <label for=\"contrasena\"\r\n                class=\"absolute text-sm text-gray-500  duration-300 transform -translate-y-8 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-verde peer-focus:dark:text-verde peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-8\">\r\n                Contraseña</label>\r\n                <button (click)=\"login()\" class=\"bg-verde text-white text-2xl px-20 py-1 mt-24\">\r\n                    Ingresar\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </div>\r\n\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}