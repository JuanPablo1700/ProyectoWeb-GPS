{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/error.service\";\nimport * as i5 from \"@angular/forms\";\nexport class LoginComponent {\n  constructor(_userService, toastr, router, _errorService) {\n    this._userService = _userService;\n    this.toastr = toastr;\n    this.router = router;\n    this._errorService = _errorService;\n    this.user = '';\n    this.password = '';\n  }\n  ngOnInit() {}\n  login() {\n    if (this.user == '' || this.password == '') {\n      this.toastr.error('Todos los campos son obligatorios', 'Error');\n      return;\n    }\n    const user = {\n      user: this.user,\n      password: this.password\n    };\n    this._userService.login(user).subscribe({\n      next: json => {\n        const data = json.split(\"-\");\n        const token = data[0];\n        const activo = data[1];\n        const tipo_usuario = data[2];\n        const pass_actualizada = data[3];\n        localStorage.setItem('token', token);\n        localStorage.setItem('user', user.user);\n        localStorage.setItem('tipo_usuario', tipo_usuario);\n        if (activo === \"1\") {\n          if (pass_actualizada === \"0\") {\n            this.router.navigate(['/inicio']);\n          } else {\n            if (tipo_usuario === \"admin\") {\n              this.router.navigate(['/principaldirector']);\n            } else if (tipo_usuario === \"gerente\") {\n              this.router.navigate(['/principalgerente']);\n            } else if (tipo_usuario === \"recepcionista\") {\n              this.router.navigate(['/principalrecepcionista']);\n            }\n          }\n        } else {\n          this.toastr.error(\"\");\n        }\n      },\n      error: e => {\n        this._errorService.msjError(e);\n      },\n      complete: () => console.log('complete')\n    });\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ErrorService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 21,\n  vars: 2,\n  consts: [[1, \"bg-verde\", \"w-full\", \"h-24\"], [\"src\", \"../../../assets/img/logo.png \", 1, \"h-24\"], [1, \"flex\", \"m-20\", \"justify-between\"], [1, \"text-titulo\", \"text-2xl\", \"font-bold\", \"ml-72\", \"mb-20\"], [\"src\", \"../../../assets/img/viaje.jpg \", 1, \"h-96\", \"ml-64\"], [1, \"p-20\", \"bg-white\", \"w-500\", \"h-700\", \"rounded-lg\"], [1, \"text-2xl\", \"font-semibold\"], [1, \"relative\", \"z-0\", \"my-10\"], [\"type\", \"text\", \"id\", \"usuario\", \"placeholder\", \" \", 1, \"block\", \"py-2.5\", \"px-0\", \"w-full\", \"text-sm\", \"text-gray-900\", \"bg-transparent\", \"border-0\", \"border-b-2\", \"border-gray-300\", \"appearance-none\", \"focus:outline-none\", \"focus:ring-0\", \"focus:border-blue-600\", \"peer\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"usuario\", 1, \"absolute\", \"text-sm\", \"text-gray-500\", \"duration-300\", \"transform\", \"-translate-y-6\", \"scale-75\", \"top-3\", \"-z-10\", \"origin-[0]\", \"peer-focus:left-0\", \"peer-focus:text-blue-600\", \"peer-focus:dark:text-blue-500\", \"peer-placeholder-shown:scale-100\", \"peer-placeholder-shown:translate-y-0\", \"peer-focus:scale-75\", \"peer-focus:-translate-y-6\"], [1, \"relative\", \"z-0\", \"my-5\"], [\"type\", \"password\", \"id\", \"contrasena\", \"placeholder\", \" \", 1, \"block\", \"py-2.5\", \"px-0\", \"w-full\", \"text-sm\", \"text-gray-900\", \"bg-transparent\", \"border-0\", \"border-b-2\", \"border-gray-300\", \"appearance-none\", \"focus:outline-none\", \"focus:ring-0\", \"focus:border-blue-600\", \"peer\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"contrasena\", 1, \"absolute\", \"text-sm\", \"text-gray-500\", \"duration-300\", \"transform\", \"-translate-y-6\", \"scale-75\", \"top-3\", \"-z-10\", \"origin-[0]\", \"peer-focus:left-0\", \"peer-focus:text-blue-600\", \"peer-focus:dark:text-blue-500\", \"peer-placeholder-shown:scale-100\", \"peer-placeholder-shown:translate-y-0\", \"peer-focus:scale-75\", \"peer-focus:-translate-y-6\"], [1, \"bg-verde\", \"text-white\", \"text-2xl\", \"px-20\", \"py-1\", \"mt-24\", 3, \"click\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"img\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\")(4, \"h1\", 3);\n      i0.ɵɵtext(5, \"Bienvenido a HotelAnalytics\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"img\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\")(8, \"div\", 5)(9, \"p\", 6);\n      i0.ɵɵtext(10, \"Iniciar Sesi\\u00F3n \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"div\", 7)(12, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_12_listener($event) {\n        return ctx.user = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"label\", 9);\n      i0.ɵɵtext(14, \" Nombre de Usuario\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 10)(16, \"input\", 11);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_16_listener($event) {\n        return ctx.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"label\", 12);\n      i0.ɵɵtext(18, \" Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"button\", 13);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_19_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtext(20, \" Ingresar \");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"ngModel\", ctx.user);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.password);\n    }\n  },\n  dependencies: [i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["LoginComponent","constructor","_userService","toastr","router","_errorService","ngOnInit","login","user","password","error","subscribe","next","json","data","split","token","activo","tipo_usuario","pass_actualizada","localStorage","setItem","navigate","e","msjError","complete","console","log","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\Juan Pablo\\OneDrive\\Documentos\\GPS\\ProyectoWeb-GPS\\hotelanalytics\\src\\app\\components\\login\\login.component.ts","C:\\Users\\Juan Pablo\\OneDrive\\Documentos\\GPS\\ProyectoWeb-GPS\\hotelanalytics\\src\\app\\components\\login\\login.component.html"],"sourcesContent":["import { HttpErrorResponse } from '@angular/common/http';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { User } from 'src/app/interfaces/user';\r\nimport { ErrorService } from 'src/app/services/error.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    templateUrl: './login.component.html',\r\n    styleUrls: ['./login.component.css']\r\n})\r\nexport class LoginComponent implements OnInit{\r\n    user: string = '';\r\n    password: string = '';\r\n\r\n    constructor(\r\n        private _userService: UserService,\r\n        private toastr: ToastrService,\r\n        private router: Router,\r\n        private _errorService: ErrorService\r\n    ) { }\r\n\r\n    ngOnInit(): void {\r\n\r\n    }\r\n\r\n    login() {\r\n        if (this.user == '' || this.password == '') {\r\n            this.toastr.error('Todos los campos son obligatorios', 'Error');\r\n            return\r\n        }\r\n\r\n        const user: User = {\r\n            user: this.user,\r\n            password: this.password\r\n        }\r\n\r\n        this._userService.login(user).subscribe({\r\n            next: (json) => {\r\n                const data = json.split(\"-\");\r\n                \r\n                const token = data[0];\r\n                const activo = data[1];\r\n                const tipo_usuario = data[2];\r\n                const pass_actualizada = data[3];\r\n                \r\n                localStorage.setItem('token', token);\r\n                localStorage.setItem('user', user.user);\r\n                localStorage.setItem('tipo_usuario', tipo_usuario);\r\n\r\n                if (activo === \"1\") {\r\n                    if (pass_actualizada === \"0\") {\r\n                        this.router.navigate(['/inicio']);\r\n                    } else {\r\n                        if (tipo_usuario === \"admin\") {\r\n                            this.router.navigate(['/principaldirector']);\r\n                        } else if (tipo_usuario === \"gerente\") {\r\n                            this.router.navigate(['/principalgerente']);\r\n                        } else if (tipo_usuario === \"recepcionista\") {\r\n                            this.router.navigate(['/principalrecepcionista']);\r\n                        }\r\n                    }\r\n                } else {\r\n                    this.toastr.error(\"\")\r\n                }\r\n            },\r\n            error: (e: HttpErrorResponse) => {\r\n                this._errorService.msjError(e);\r\n            },\r\n            complete: () => console.log('complete')            \r\n        })\r\n    }\r\n}\r\n","<div class=\"bg-verde w-full h-24\">\r\n    <img src=\"../../../assets/img/logo.png \" class=\"h-24\">\r\n\r\n</div>\r\n<div class=\"flex m-20 justify-between\">\r\n    <div>\r\n        <h1 class=\"text-titulo text-2xl font-bold ml-72 mb-20\">Bienvenido a HotelAnalytics</h1>\r\n        <img src=\"../../../assets/img/viaje.jpg \" class=\"h-96 ml-64\">\r\n    </div>\r\n    <div>\r\n        <div class=\" p-20  bg-white w-500 h-700 rounded-lg\">\r\n            <p class=\"text-2xl font-semibold\">Iniciar Sesión </p>\r\n            <div class=\"relative z-0 my-10\">\r\n                <input type=\"text\" [(ngModel)]=\"user\" id=\"usuario\"\r\n                    class=\"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer\"\r\n                    placeholder=\" \" />\r\n                <label for=\"usuario\"\r\n                    class=\"absolute text-sm text-gray-500  duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6\">\r\n                    Nombre de Usuario</label>\r\n            </div>\r\n            <div class=\"relative z-0 my-5\">\r\n                <input type=\"password\" [(ngModel)]=\"password\" id=\"contrasena\"\r\n                    class=\"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer\"\r\n                    placeholder=\" \" />\r\n                <label for=\"contrasena\"\r\n                    class=\"absolute text-sm text-gray-500  duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6\">\r\n                    Contraseña</label>\r\n                <button (click)=\"login()\" class=\"bg-verde text-white text-2xl px-20 py-1 mt-24\">\r\n                    Ingresar\r\n                </button>\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}