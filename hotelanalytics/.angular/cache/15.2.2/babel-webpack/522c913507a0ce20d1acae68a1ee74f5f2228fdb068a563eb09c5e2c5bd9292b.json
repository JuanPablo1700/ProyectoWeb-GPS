{"ast":null,"code":"import _asyncToGenerator from \"/Users/arlethe/Documents/Escuela/GPS/ProyectoWeb-GPS/hotelanalytics/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"ngx-toastr\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"src/app/services/error.service\";\nimport * as i5 from \"@angular/forms\";\nexport class LoginComponent {\n  constructor(_userService, toastr, router, _errorService) {\n    this._userService = _userService;\n    this.toastr = toastr;\n    this.router = router;\n    this._errorService = _errorService;\n    this.user = '';\n    this.password = '';\n  }\n  ngOnInit() {}\n  login() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (_this.user == '' || _this.password == '') {\n        _this.toastr.error('Todos los campos son obligatorios', 'Error');\n        return;\n      }\n      const user = {\n        user: _this.user,\n        password: _this.password\n      };\n      yield _this._userService.login(user).subscribe({\n        next: json => {\n          const data = json.split(\"-separador-\");\n          console.log(data);\n          const token = data[0];\n          const activo = data[1];\n          const tipo_usuario = data[2];\n          const pass_actualizada = data[3];\n          if (activo === \"1\") {\n            localStorage.setItem('token', token);\n            localStorage.setItem('user', user.user);\n            localStorage.setItem('tipo_usuario', tipo_usuario);\n            if (pass_actualizada === \"0\") {\n              _this.router.navigate(['/inicio']);\n            } else {\n              if (tipo_usuario === \"admin\") {\n                _this.router.navigate(['/principaldirector']);\n              } else if (tipo_usuario === \"gerente\") {\n                _this.router.navigate(['/principalgerente']);\n              } else if (tipo_usuario === \"recepcionista\") {\n                _this.router.navigate(['/principalrecepcionista']);\n              }\n            }\n          } else {\n            _this.toastr.error(\"Usuario desactivado\", \"Error\");\n            _this.router.navigate(['/login']);\n          }\n        },\n        error: e => {\n          _this._errorService.msjError(e);\n        },\n        complete: () => console.log('complete')\n      });\n    })();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.ToastrService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.ErrorService));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 20,\n  vars: 2,\n  consts: [[1, \"bg-verde\", \"w-full\", \"h-24\"], [\"src\", \"../../../assets/img/logo.png \", 1, \"h-28\", \"-mt-4\"], [1, \"flex\", \"m-20\", \"justify-between\", \"w-3/4\", \"h-full\", \"jus\"], [1, \"border\", \"flex\", \"flex-col\", \"justify-center\"], [1, \"text-titulo\", \"text-2xl\", \"font-bold\", \"mb-20\"], [\"src\", \"../../../assets/img/viaje.jpg \", 1, \"h-96\"], [1, \"p-20\", \"bg-white\", \"w-500\", \"h-700\", \"rounded-lg\"], [1, \"text-2xl\", \"font-semibold\"], [1, \"relative\", \"z-0\", \"my-10\"], [\"type\", \"text\", \"id\", \"usuario\", \"placeholder\", \" \", 1, \"block\", \"py-2.5\", \"px-0\", \"w-full\", \"text-sm\", \"text-gray-900\", \"bg-transparent\", \"border-0\", \"border-b-2\", \"border-gray-300\", \"appearance-none\", \"focus:outline-none\", \"focus:ring-0\", \"focus:border-blue-600\", \"peer\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"usuario\", 1, \"absolute\", \"text-sm\", \"text-gray-500\", \"duration-300\", \"transform\", \"-translate-y-6\", \"scale-75\", \"top-3\", \"-z-10\", \"origin-[0]\", \"peer-focus:left-0\", \"peer-focus:text-blue-600\", \"peer-focus:dark:text-blue-500\", \"peer-placeholder-shown:scale-100\", \"peer-placeholder-shown:translate-y-0\", \"peer-focus:scale-75\", \"peer-focus:-translate-y-6\"], [1, \"relative\", \"z-0\", \"my-5\"], [\"type\", \"password\", \"id\", \"contrasena\", \"placeholder\", \" \", 1, \"block\", \"py-2.5\", \"px-0\", \"w-full\", \"text-sm\", \"text-gray-900\", \"bg-transparent\", \"border-0\", \"border-b-2\", \"border-gray-300\", \"appearance-none\", \"focus:outline-none\", \"focus:ring-0\", \"focus:border-blue-600\", \"peer\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"contrasena\", 1, \"absolute\", \"text-sm\", \"text-gray-500\", \"duration-300\", \"transform\", \"-translate-y-6\", \"scale-75\", \"top-3\", \"-z-10\", \"origin-[0]\", \"peer-focus:left-0\", \"peer-focus:text-blue-600\", \"peer-focus:dark:text-blue-500\", \"peer-placeholder-shown:scale-100\", \"peer-placeholder-shown:translate-y-0\", \"peer-focus:scale-75\", \"peer-focus:-translate-y-6\"], [1, \"bg-verde\", \"text-white\", \"text-2xl\", \"px-20\", \"py-1\", \"mt-24\", 3, \"click\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"img\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 2)(3, \"div\", 3)(4, \"h1\", 4);\n      i0.ɵɵtext(5, \"Bienvenido a HotelAnalytics\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(6, \"img\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 6)(8, \"p\", 7);\n      i0.ɵɵtext(9, \"Iniciar Sesi\\u00F3n \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 8)(11, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.user = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"label\", 10);\n      i0.ɵɵtext(13, \" Nombre de Usuario\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"div\", 11)(15, \"input\", 12);\n      i0.ɵɵlistener(\"ngModelChange\", function LoginComponent_Template_input_ngModelChange_15_listener($event) {\n        return ctx.password = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"label\", 13);\n      i0.ɵɵtext(17, \" Contrase\\u00F1a\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"button\", 14);\n      i0.ɵɵlistener(\"click\", function LoginComponent_Template_button_click_18_listener() {\n        return ctx.login();\n      });\n      i0.ɵɵtext(19, \" Ingresar \");\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngModel\", ctx.user);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.password);\n    }\n  },\n  dependencies: [i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["LoginComponent","constructor","_userService","toastr","router","_errorService","ngOnInit","login","user","password","error","subscribe","next","json","data","split","console","log","token","activo","tipo_usuario","pass_actualizada","localStorage","setItem","navigate","e","msjError","complete","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/Users/arlethe/Documents/Escuela/GPS/ProyectoWeb-GPS/hotelanalytics/src/app/components/login/login.component.ts","/Users/arlethe/Documents/Escuela/GPS/ProyectoWeb-GPS/hotelanalytics/src/app/components/login/login.component.html"],"sourcesContent":["import { HttpErrorResponse } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { User } from 'src/app/interfaces/user';\nimport { ErrorService } from 'src/app/services/error.service';\nimport { UserService } from 'src/app/services/user.service';\n\n@Component({\n    selector: 'app-login',\n    templateUrl: './login.component.html',\n    styleUrls: ['./login.component.css']\n})\nexport class LoginComponent implements OnInit {\n    user: string = '';\n    password: string = '';\n\n    constructor(\n        private _userService: UserService,\n        private toastr: ToastrService,\n        private router: Router,\n        private _errorService: ErrorService\n    ) { }\n\n    ngOnInit(): void {\n\n    }\n\n    async login() {\n        if (this.user == '' || this.password == '') {\n            this.toastr.error('Todos los campos son obligatorios', 'Error');\n            return\n        }\n\n        const user: User = {\n            user: this.user,\n            password: this.password\n        }\n\n        await this._userService.login(user).subscribe({\n            next: (json) => {\n                const data = json.split(\"-separador-\");\n                console.log(data);\n                \n                const token = data[0];\n                const activo = data[1];\n                const tipo_usuario = data[2];\n                const pass_actualizada = data[3];\n\n                if (activo === \"1\") {\n                    localStorage.setItem('token', token);\n                    localStorage.setItem('user', user.user);\n                    localStorage.setItem('tipo_usuario', tipo_usuario);\n                    if (pass_actualizada === \"0\") {\n                        this.router.navigate(['/inicio']);\n                    } else {\n                        if (tipo_usuario === \"admin\") {\n                            this.router.navigate(['/principaldirector']);\n                        } else if (tipo_usuario === \"gerente\") {\n                            this.router.navigate(['/principalgerente']);\n                        } else if (tipo_usuario === \"recepcionista\") {\n                            this.router.navigate(['/principalrecepcionista']);\n                        }\n                    }\n                } else {\n                    this.toastr.error(\"Usuario desactivado\", \"Error\");\n                    this.router.navigate(['/login']);\n                }\n            },\n            error: (e: HttpErrorResponse) => {\n                this._errorService.msjError(e);\n            },\n            complete: () => console.log('complete')\n        })\n    }\n}\n","<div class=\"bg-verde w-full h-24\">\n    <img src=\"../../../assets/img/logo.png \" class=\"h-28 -mt-4\">\n\n</div>\n<div class=\"flex m-20 justify-between w-3/4 h-full jus \">\n    <div class=\"border flex flex-col justify-center \">\n        <h1 class=\"text-titulo text-2xl font-bold  mb-20\">Bienvenido a HotelAnalytics</h1>\n        <img src=\"../../../assets/img/viaje.jpg \" class=\"h-96 \">\n    </div>\n    \n    <div class=\" p-20 bg-white w-500 h-700 rounded-lg\">\n        <p class=\"text-2xl font-semibold\">Iniciar Sesión </p>\n        <div class=\"relative z-0 my-10\">\n            <input type=\"text\" [(ngModel)]=\"user\" id=\"usuario\"\n                class=\"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer\"\n                placeholder=\" \" />\n            <label for=\"usuario\"\n                class=\"absolute text-sm text-gray-500  duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6\">\n                Nombre de Usuario</label>\n        </div>\n        <div class=\"relative z-0 my-5\">\n            <input type=\"password\" [(ngModel)]=\"password\" id=\"contrasena\"\n                class=\"block py-2.5 px-0 w-full text-sm text-gray-900 bg-transparent border-0 border-b-2 border-gray-300 appearance-none focus:outline-none focus:ring-0 focus:border-blue-600 peer\"\n                placeholder=\" \" />\n            <label for=\"contrasena\"\n                class=\"absolute text-sm text-gray-500  duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:left-0 peer-focus:text-blue-600 peer-focus:dark:text-blue-500 peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6\">\n                Contraseña</label>\n            <button (click)=\"login()\" class=\"bg-verde text-white text-2xl px-20 py-1 mt-24\">\n                Ingresar\n            </button>\n        </div>\n\n    </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}